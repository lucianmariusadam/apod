webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n=a("mvHQ"),s=a.n(n),o=a("mtWM"),r=a.n(o),l={name:"Main",data:function(){return{msg:"NASA - Astronomy Picture of the Day",loadingMsg:"loading ...",status:"",cache:{},media:null,date:null,maxDate:null,width:320,height:240,loading:!1}},mounted:function(){this.init()},computed:{mediaDate:function(){return this.media?this.media.date:""},imageUrl:function(){return this.media&&"image"===this.media.media_type?this.media.url:""},videoUrl:function(){return this.media&&"video"===this.media.media_type?this.media.url:""},explanation:function(){return this.media?this.media.explanation:""}},methods:{init:function(){this.maxDate=new Date,this.setDate()},setDate:function(t){void 0===t?this.date=new Date:this.date.setDate(t),this.getImage()},prev:function(){this.setDate(this.date.getDate()-1)},next:function(){this.allowNext()&&this.setDate(this.date.getDate()+1)},allowNext:function(){return this.date<this.maxDate},getImage:function(){var t=this,e=this.simpleDate();if(this.media=null,localStorage.getItem(e))t.getMediaFromCache();else{var a="https://api.nasa.gov/planetary/apod?api_key=LhxNNyeOUIv4VadRAeUUcCFVNyFXnJNZArX8fn9Z&date="+e;t.loadingOn(),r.a.get(a).then(function(a){var i=a.data;localStorage.setItem(e,s()(i)),t.getMediaFromCache()}).catch(function(e){t.status=e.response.data.msg,t.loadingOff()}).finally(function(){})}},getMediaFromCache:function(){this.media=JSON.parse(localStorage.getItem(this.simpleDate())),this.status=""},loadingOn:function(){this.loading=!0},loadingOff:function(){this.loading=!1},simpleDate:function(){if(!this.date)return null;var t=this.date.getDate(),e=this.date.getMonth()+1;return this.date.getFullYear()+"-"+e+"-"+t}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v(t._s(t.simpleDate()))]),t._v(" "),a("h4",{attrs:{id:"status"}},[t._v(t._s(t.status))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{id:"loading"}},[t._v(t._s(t.loadingMsg))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[a("span",{staticClass:"button",on:{click:function(e){return t.prev()}}},[t._v("prev")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.allowNext(),expression:"allowNext()"}],staticClass:"button",on:{click:function(e){return t.next()}}},[t._v("next")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.imageUrl,expression:"imageUrl"}],attrs:{src:t.imageUrl,width:t.width,height:t.height},on:{load:function(e){return t.loadingOff()}}}),t._v(" "),a("iframe",{directives:[{name:"show",rawName:"v-show",value:t.videoUrl,expression:"videoUrl"}],attrs:{src:t.videoUrl,width:t.width,height:t.height},on:{load:function(e){return t.loadingOff()}}}),t._v(" "),a("div",{attrs:{id:"explanation"}},[t._v(t._s(t.explanation))])])])},staticRenderFns:[]};var h={name:"App",components:{Main:a("VU/8")(l,d,!1,function(t){a("gETv")},"data-v-284bacf7",null).exports}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Main")],1)},staticRenderFns:[]};var c=a("VU/8")(h,u,!1,function(t){a("S77J")},null,null).exports;i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:c},template:"<App/>"})},S77J:function(t,e){},gETv:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0ffed325cc9c2ae2a55c.js.map